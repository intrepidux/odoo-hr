<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="about-us">
        <t t-call="website.layout">
            <div id="wrap" class="oe_structure oe_empty" />
            <t t-set="is_publisher" t-value="request.env['res.users'].has_group('website.group_website_publisher')" />
            <t t-set="employees_domain" t-value="[] if is_publisher else [('website_published', '=', True)]" />
            <t t-set="multiwebsite_domain" t-value="request.website.website_domain()" />
            <t t-set="employees" t-value="request.env['hr.employee'].search(employees_domain + multiwebsite_domain)" />
            <div class="container" t-if="len(employees)">
                <div class="row">
                    <div t-foreach="employee_ids" t-as="employee" class="col-md-3 col-xl-2 mt16 text-center">
                        <t t-call="website.publish_management">
                            <t t-set="object" t-value="employee" />
                            <t t-set="publish_edit" t-value="True" />
                            <t t-set="style" t-value="'float: none !important; margin-bottom: 4px;'" />
                        </t>
                        <!--
                             <img t-att-src="website.image_url(employee, 'image_128')" class="img shadow rounded" alt="Employee" />
                             <img class="rounded shadow o_alternative_product o_carousel_product_card_img_top card-img-top"
                             t-if="product_variant" t-att-src="website.imagefield_hash('product.template','image_1920',alt_product.id,'theme_maria_akerberg.img_product')" />
                        <img t-att-src="website.imagefield_hash(employee, 'image_128', employee.id)" alt="Employee" />
                        -->
				<img t-att-src="website.imagefield_hash('hr.employee','image_1920', employee.id, 'hr_website_about-us.img_employees_view')" alt="Employee" />
			<div class="mt8">
                            <strong t-field="employee.name" />
                        </div>
                        <div t-field="employee.job_id" />
                        <div t-field="employee.public_info" class="text-muted mt16 d-block mx-auto" />
                    </div>
                </div>
            </div>
        </t>
    </template>
    <record id="view_employee_form" model="ir.ui.view">
        <field name="name">employee.form</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form" />
        <field name="arch" type="xml">
            <xpath expr="//sheet/div[1]" position="before">
                <div class="oe_button_box" name="button_box">
                    <field name="is_published" class="oe_inline" widget="website_redirect_button" />
                </div>
            </xpath>
        </field>
    </record>
</odoo>
